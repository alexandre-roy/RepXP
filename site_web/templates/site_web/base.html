{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="" />
    <link href="{% static 'site_web/css/styles.css' %}" rel="stylesheet" />

    {% block title %} {% endblock %}
  </head>

  <body class="d-flex flex-column min-vh-100 bg-light">
    <nav class="navbar navbar-expand-md navbar-light bg-light fixed-top bottom">
      <div class="collapse navbar-collapse mx-3" id="navbarsExampleDefault">
        <ul class="navbar-nav me-auto">
          <li class="nav-item active">
            <a href="{% url 'index' %}">
              <img
                href="{% url 'index' %}"
                src="../../static/images/repxp_logo_nobg.png"
                alt=""
                width="120"
                height="120"
              />
            </a>
          </li>
        </ul>
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
          <li class="nav-item">
            <a class="nav-link mx-lg-2" href="{% url 'index' %}">ACCUEIL</a>
          </li>
          {% if user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link mx-lg-2 disabled" href="#">DÉFIS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link mx-lg-2 disabled" href="#">CLASSEMENTS</a>
          </li>
          {% if est_admin %}
          <li class="nav-item">
            <a class="nav-link mx-lg-2" href="{% url 'review' %}"
              >EXERCICES</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link mx-lg-2 disabled" href="#">UTILISATEURS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link mx-lg-2 disabled" href="#">BADGES</a>
          </li>
          {% else %}
          <li class="nav-item">
            <a class="nav-link mx-lg-2" href="{% url 'bank' %}">EXERCICES</a>
          </li>
          {% endif %}
          <li class="nav-item">
            <a class="nav-link mx-lg-2 disabled" href="#">{{user.username}}</a>
          </li>
          {% endif %}
        </ul>
        <div class="text-end">
          {% if user.is_authenticated %}
          <button
            href="#"
            class="style-button-danger"
            data-bs-toggle="modal"
            data-bs-target="#logoutModal"
          >
            DÉCONNEXION
        </button>
          {% else %}
          <ul class="navbar-nav ms-auto">
            <li class="nav-item active ml-auto">
              <form action="{% url 'signin' %}" method="get">
                <button type="submit" class="style-button">
                    CONNEXION
                </button>
              </form>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>
      <div class="navigation">
        {% block navigation %}{% endblock %}
      </div>
    <div class="d-flex justify-content-center">
      {% if messages %}
      <div class="toast-container">
        {% for message in messages %}
        <div
          class="toast text-bg-{{ message.tags }} show"
          role="alert"
          aria-live="assertive"
          aria-atomic="true"
        >
          <div class="d-flex">
            <div class="toast-body">{{ message }}</div>
            <button
              type="button"
              class="btn-close btn-close-white me-2 m-auto"
              data-bs-dismiss="toast"
              aria-label="Close"
            ></button>
          </div>
        </div>
        {% endfor %}
      </div>
      {% endif %}
    </div>
    <main role="main" class="container mt-5 flex-fill">
      {% block main %} {% endblock %}
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    {% if user.is_authenticated %} {% include "partials/logout_partial.html" %}
    {% endif %}
  </body>
  <footer class="text-center mt-5 bg-blue align-content-center">
    <p class="mb-0">&copy; 2025 RepXP | Tous droits réservés.</p>
  </footer>
</html>
