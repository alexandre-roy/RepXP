{% extends "site_web/base.html" %}
{% load static %}
{% block title %}
    <title>RepXP | Mon Profil</title>
{% endblock %}
{% block navigation %}
    <a href="{% url 'profile' %}" class="active-link">MON PROFIL</a>
    <a href="{% url 'edit_profile' %}" class="inactive-link">MODIFICATION DE PROFIL</a>
{% endblock %}
{% block main %}
    <div class="profile-container">
        <div class="profile-card">
            <div class="avatar-section">
                <img src="{{ user.avatar.url }}" class="rounded-circle" width="150" height="150">
                <h2 class="username">{{ user.username }}</h2>
            </div>

            <div class="info-section">
                <h3>Informations personnelles</h3>
                <div class="info-grid">
                    <div><strong>Nom complet :</strong> {{ user.first_name }} {{ user.last_name }}</div>
                    <div><strong>Sexe :</strong>
                        {% if user.sexe == "M" %} Masculin
                        {% elif user.sexe == "F" %} Féminin
                        {% else %} Non spécifié {% endif %}
                    </div>
                    <div><strong>Date de naissance :</strong> {{ user.date_naissance|date:"d/m/Y" }}</div>
                    <div><strong>Taille :</strong>
                        {% if user.taille %} {{ user.taille }} m
                        {% else %} Non spécifié {% endif %}
                    </div>
                    <div><strong>Poids :</strong>
                        {% if user.poids %} {{ user.poids }} kg
                        {% else %} Non spécifié {% endif %}
                    </div>
                    <div><strong>Adresse courriel :</strong>
                        {% if user.email %} {{ user.email }}
                        {% else %} Non spécifié {% endif %}
                    </div>
                </div>
            </div>
            <div class="info-section">
                <h3>Statistiques</h3>
                <div class="info-grid">
                    <div><strong>Séries effectuées :</strong> <span id="stats-sets">{{ stats.sets_effectues }}</span></div>
                    <div><strong>Répétitions effectuées :</strong> <span id="stats-reps">{{ stats.reps_effectuees }}</span></div>
                    <div><strong>Exercices complétés :</strong> <span id="stats-ex">{{ stats.exercices_completes }}</span></div>
                    <div><strong>Entraînements complétés :</strong> <span id="stats-ent">{{ stats.entrainements_completes }}</span></div>
                    <div><strong>Badges obtenus :</strong> <span id="stats-bad">{{ stats.badges_obtenus }}</span></div>
                </div>
                <div class="text-center mt-3">
                    <button id="refresh-stats" class="style-button" style="margin-top:15px;">
                        Actualiser statistiques
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const refreshStatsUrl = "{% url 'ajax_statistiques' %}";
    </script>

    <script src="{% static 'site_web/js/profil.js' %}"></script>
{% endblock %}